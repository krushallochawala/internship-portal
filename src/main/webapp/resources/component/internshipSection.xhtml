<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:cc="jakarta.faces.composite"
      xmlns:ui="jakarta.faces.facelets"
      xmlns:f="jakarta.faces.core">

    <!-- INTERFACE -->
    <cc:interface>
        <!-- mode should be either 'limited' or 'all' -->
        <cc:attribute name="mode" type="java.lang.String" default="limited" />
    </cc:interface>

    <!-- IMPLEMENTATION -->
    <cc:implementation>
        <section class="find-job section">
            <div class="container">
                <h:panelGroup rendered="#{cc.attrs.mode eq 'limited'}">
                    <div class="row">
                        <div class="col-12">
                            <div class="section-title">
                                <span class="wow fadeInDown" data-wow-delay=".2s" style="visibility: visible; animation-delay: 0.2s; animation-name: fadeInDown;">
                                    Internships
                                </span>
                                <h2 class="wow fadeInUp" data-wow-delay=".4s" style="visibility: visible; animation-delay: 0.4s; animation-name: fadeInUp;">
                                    Explore Internships That Launch Careers
                                </h2>
                                <p class="wow fadeInUp" data-wow-delay=".6s" style="visibility: visible; animation-delay: 0.6s; animation-name: fadeInUp;">
                                    Discover exciting internship opportunities tailored to help you grow your skills, gain industry experience, and kick-start your professional journey.
                                </p>
                            </div>
                        </div>
                    </div>
                </h:panelGroup>
                
                <div class="single-head">
                    <f:event type="preRenderComponent" listener="#{internshipCDIBean.setMode(cc.attrs.mode)}"/>
                    <ui:repeat value="#{internshipCDIBean.groupedInternships}" var="internshipRow">
                        <div class="row">
                            <ui:repeat value="#{internshipRow}" var="internship">
                                <div class="col-lg-6 col-12">
                                    <!-- Single Job -->
                                    <div class="single-job wow fadeInUp" data-wow-delay=".3s" style="visibility: visible; animation-delay: 0.3s; animation-name: fadeInUp;">
                                        <div class="job-content">
                                            <h4>
                                                <h:form>
                                                    <h:outputLink value="internshipDetail.xhtml">
                                                        <f:param name="id" value="#{internship.id}" />
                                                        #{internship.title}
                                                    </h:outputLink>
                                                </h:form>
                                            </h4>
                                            <p class="internshipContent">#{internship.description}</p>
                                            <ul>
                                                <h:panelGroup rendered="#{not empty internship.stipend}">
                                                    <li>
                                                        <i class="fas fa-rupee-sign"></i> Stipend - #{internship.stipend}
                                                    </li>
                                                </h:panelGroup>
                                                <h:panelGroup rendered="#{internship.paid}">
                                                    <li>
                                                        <i class="fas fa-rupee-sign"></i> Paid
                                                    </li>
                                                </h:panelGroup>
                                                <li><i class="fas fa-map-marker-alt"></i> #{internship.location}</li>
                                                <li>#{internship.internshipType}</li>
                                                <li>#{internship.status}</li>
                                            </ul>
                                        </div>
                                        <div class="job-button">
                                            <ul>
                                                <li>
                                                    <h:form>
                                                        <h:commandLink action="#{internshipCDIBean.getInternshipById(internship.id)}" value="Apply" />
                                                    </h:form>
                                                </li>
                                                <li><span>#{internship.internshipTime}</span></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </ui:repeat>
                        </div>
                    </ui:repeat>
                    <h:panelGroup rendered="#{cc.attrs.mode eq 'limited'}">
                        <div class="row mt-5">
                            <div class="col-12 text-center">
                                <a href="#{request.contextPath}/internships.xhtml" class="explore-more">Explore More Internships </a>
                            </div>
                        </div>
                    </h:panelGroup>
                </div>
            </div>
        </section>
    </cc:implementation>
</html>
